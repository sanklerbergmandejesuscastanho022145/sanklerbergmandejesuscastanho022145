<div class="pets-container">
  <div class="pets-header">
    <h1>Lista de Pets</h1>
    <div class="header-actions">
      <button class="btn-secondary" (click)="irParaTutores()">Tutores</button>
      <button class="btn-primary" (click)="novoPet()">Novo Pet</button>
      <button class="btn-logout" (click)="logout()">Sair</button>
    </div>
  </div>

  <!-- Campo de Busca -->
  <div class="search-container" *ngIf="!loading && !errorMessage">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Buscar pet por nome..."
        [(ngModel)]="termoBusca"
        (input)="aplicarFiltro()"
      >
      <button 
        class="clear-button" 
        *ngIf="termoBusca"
        (click)="limparBusca()"
        title="Limpar busca"
      >
        âœ•
      </button>
    </div>
    <div class="search-info" *ngIf="termoBusca">
      <span>{{ petsFiltrados.length }} resultado(s) encontrado(s)</span>
    </div>
  </div>

  <!-- Mostrar loading -->
  <div *ngIf="loading" class="loading">
    Carregando...
  </div>

  <!-- Mostrar erro -->
  <div *ngIf="!loading && errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Grid de pets -->
  <div class="pets-grid" *ngIf="!loading && !errorMessage && petsFiltrados.length > 0">
    <div class="pet-card" *ngFor="let pet of petsFiltrados">
      <div class="pet-image" *ngIf="pet.foto?.url">
        <img [src]="pet.foto?.url || ''" [alt]="pet.nome">
      </div>
      
      <div class="pet-image empty-photo" *ngIf="!pet.foto?.url">
        <span>ğŸ¾</span>
      </div>
      
      <div class="pet-info">
        <h3>{{ pet.nome }}</h3>
        <p *ngIf="pet.raca"><strong>RaÃ§a:</strong> {{ pet.raca }}</p>
        <p *ngIf="pet.idade"><strong>Idade:</strong> {{ pet.idade }} anos</p>
      </div>

      <div class="pet-actions">
        <button class="btn-view" (click)="verDetalhes(pet.id!)">Ver Detalhes</button>
        <button class="btn-edit" (click)="editarPet(pet.id!)">Editar</button>
        <button class="btn-delete" (click)="deletarPet(pet.id!)">Excluir</button>
      </div>
    </div>
  </div>

  <!-- Nenhum resultado encontrado na busca -->
  <div *ngIf="!loading && !errorMessage && termoBusca && petsFiltrados.length === 0" class="no-results">
    <span class="no-results-icon">ğŸ”</span>
    <p>Nenhum pet encontrado com o nome "{{ termoBusca }}"</p>
    <button class="btn-primary" (click)="limparBusca()">Limpar busca</button>
  </div>

  <!-- Nenhum pet cadastrado -->
  <div *ngIf="!loading && !errorMessage && !termoBusca && pets.length === 0" class="empty-state">
    <p>Nenhum pet cadastrado ainda.</p>
    <button class="btn-primary" (click)="novoPet()">Cadastrar primeiro pet</button>
  </div>
</div>