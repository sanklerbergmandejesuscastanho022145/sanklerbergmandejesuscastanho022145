<div class="form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? 'Editar Tutor' : 'Novo Tutor' }}</h1>
  </div>

  <!-- Mensagens de feedback -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>

  <!-- Loading -->
  <div *ngIf="loading && !isUploading" class="loading">
    Processando...
  </div>

  <!-- FormulÃ¡rio -->
  <form *ngIf="!loading || isUploading" (ngSubmit)="salvar()" class="tutor-form">
    
    <!-- Upload de Foto -->
    <div class="form-section photo-section">
      <h3>Foto do Tutor</h3>
      
        <div class="photo-upload-area">
        <div class="photo-preview" *ngIf="fotoPreview">
          <img [src]="fotoPreview" alt="Preview da foto">
          <button type="button" class="remove-photo-btn" (click)="removerFoto()">
            âœ•
          </button>
        </div>
        
        <div class="photo-placeholder" *ngIf="!fotoPreview">
          <span class="photo-icon">ðŸ“·</span>
          <p>Nenhuma foto selecionada</p>
        </div>
        
        <label for="fotoInput" class="btn-upload">
          {{ fotoPreview ? 'Alterar Foto' : 'Selecionar Foto' }}
        </label>
        <input 
          type="file" 
          id="fotoInput" 
          accept="image/*" 
          (change)="onFileSelected($event)"
          style="display: none;"
        >
        
        <small class="photo-hint">Formatos aceitos: JPG, PNG, GIF (mÃ¡x. 5MB)</small>
      </div>

      <!-- Barra de progresso do upload -->
      <div *ngIf="isUploading" class="upload-progress">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="uploadProgress"></div>
        </div>
        <span class="progress-text">Enviando foto... {{ uploadProgress }}%</span>
      </div>
    </div>

    <!-- Dados Pessoais -->
    <div class="form-section">
      <h3>Dados Pessoais</h3>
      
      <div class="form-group">
        <label for="nome">Nome Completo *</label>
        <input 
          type="text" 
          id="nome" 
          name="nome"
          [(ngModel)]="tutor.nome"
          placeholder="Digite o nome completo"
          required
          maxlength="100"
        >
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="cpf">CPF</label>
          <input 
            type="text" 
            id="cpf" 
            name="cpf"
            [(ngModel)]="tutor.cpf"
            (blur)="formatarCPF()"
            placeholder="000.000.000-00"
            maxlength="14"
          >
        </div>

        <div class="form-group">
          <label for="telefone">Telefone *</label>
          <input 
            type="text" 
            id="telefone" 
            name="telefone"
            [(ngModel)]="tutor.telefone"
            (blur)="formatarTelefone()"
            placeholder="(00) 00000-0000"
            required
            maxlength="15"
          >
        </div>
      </div>

      <div class="form-group">
        <label for="email">E-mail</label>
        <input 
          type="email" 
          id="email" 
          name="email"
          [(ngModel)]="tutor.email"
          placeholder="email@exemplo.com"
          maxlength="100"
        >
      </div>
    </div>

    <!-- EndereÃ§o -->
    <div class="form-section">
      <h3>EndereÃ§o</h3>
      
      <div class="form-group">
        <label for="endereco">EndereÃ§o Completo *</label>
        <textarea 
          id="endereco" 
          name="endereco"
          [(ngModel)]="tutor.endereco"
          placeholder="Rua, nÃºmero, bairro, cidade - estado"
          required
          rows="3"
          maxlength="200"
        ></textarea>
      </div>
    </div>

    <!-- BotÃµes de aÃ§Ã£o -->
    <div class="form-actions">
      <button 
        type="button" 
        class="btn-cancel" 
        (click)="cancelar()"
        [disabled]="loading"
      >
        Cancelar
      </button>
      
      <button 
        type="submit" 
        class="btn-save"
        [disabled]="loading || isUploading"
      >
        {{ loading ? 'Salvando...' : (isEditMode ? 'Atualizar' : 'Cadastrar') }}
      </button>
    </div>
  </form>
</div>